{"version":3,"file":"static/js/77.5249b9cd.chunk.js","mappings":"0QAqEMA,EAAY,CAChBC,kBAxDwBC,IAAS,CACjCC,OAAQ,kBAAM,6BAAN,EACRC,QAASC,EAAAA,aAuDTC,mBApDyBJ,IAAS,CAClCC,OAAQ,kBAAM,6BAAN,EACRC,QAASC,EAAAA,aAmDTE,uBAhD6BL,IAAS,CACtCC,OAAQ,kBAAM,oDAAN,EACRC,QAASC,EAAAA,aA+CTG,oBA5C0BN,IAAS,CACnCC,OAAQ,kBAAM,8DAAN,EACRC,QAASC,EAAAA,aA2CTI,yBAxC+BP,IAAS,CACxCC,OAAQ,kBAAM,6DAAN,EACRC,QAASC,EAAAA,aAuCTK,0BApCgCR,IAAS,CACzCC,OAAQ,kBAAM,6BAAN,EACRC,QAASC,EAAAA,aAmCTM,uBAhC6BT,IAAS,CACtCC,OAAQ,kBAAM,6BAAN,EACRC,QAASC,EAAAA,aA+BTO,oBA5B0BV,IAAS,CACnCC,OAAQ,kBAAM,6BAAN,EACRC,QAASC,EAAAA,aA2BTQ,sBAxB4BX,IAAS,CACrCC,OAAQ,kBAAM,4BAAN,EACRC,QAASC,EAAAA,aAuBTS,iBApBuBZ,IAAS,CAChCC,OAAQ,kBAAM,6BAAN,EACRC,QAASC,EAAAA,aAmBTU,2BAhBiCb,IAAS,CAC1CC,OAAQ,kBAAM,2BAAN,EACRC,QAASC,EAAAA,cAiBX,SAASW,EAAcC,GACrB,IAAQC,EAA0ED,EAA1EC,oBAAqBC,EAAqDF,EAArDE,SAAUC,EAA2CH,EAA3CG,YAAaC,EAA8BJ,EAA9BI,aAAcC,EAAgBL,EAAhBK,YAC5DC,IAAeC,EAAAA,EAAAA,UAAiB,sBAChCC,EAAkBD,EAAAA,EAAAA,UAAiB,qBACnCE,GAAWC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,WACRR,EAAYG,GACPA,IAGFD,GAAeO,EAAAA,EAAAA,IAAYC,EAAAA,EAAAA,GAAAA,KAAAA,QAA2B,KAAM,CAACT,aAAAA,IAC3DU,MAAK,SAAAC,GAAG,OAAId,EAAoBc,EAAIC,KAA5B,IACRC,OAAM,SAAAC,GAAC,OAAIC,QAAQC,IAAIF,EAAhB,IACmB,MAA7BG,OAAOZ,SAASa,UAAoBpB,EAAS,IAAMM,IALnDN,EAAS,SAOZ,GAAE,CAACI,EAAYG,IAahB,OAVS,SAAC,KAAD,UAEDc,EAAAA,EAAAA,KAA2B,SAACC,EAAOC,GACjC,IAAMC,EAAY3C,EAAUyC,EAAMG,SAClC,OAAO,SAAC,KAAD,CAAwCC,KAAMJ,EAAMI,KAAMD,SAAS,SAACD,EAAD,CAAWxB,SAAUA,KAA5E,uBAAyBuB,EAC7C,KAMV,CAED1B,EAAcC,MAAQ,CACpBK,YAAawB,IAAAA,OACb5B,oBAAqB4B,IAAAA,KACrB1B,YAAa0B,IAAAA,MAGf,IAAMC,GAAkBC,EAAAA,EAAAA,IAAoB,CAC1C1B,YAAa2B,EAAAA,KAGTC,EAAqB,CACzBhC,oBAAAA,EAAAA,GACAE,YAAAA,EAAAA,GACAC,aAAAA,EAAAA,IAGF,WAAe8B,EAAAA,EAAAA,IAAQJ,EAAiBG,EAAxC,CAA4DlC,E","sources":["app/authenticator.jsx"],"sourcesContent":["import React, {useEffect} from \"react\";\nimport PropTypes from \"prop-types\";\nimport {connect} from \"react-redux\";\nimport { createPropsSelector } from \"reselect-immutable-helpers\";\nimport { Route, Routes, useLocation, useNavigate } from \"react-router-dom\";\nimport Loadable from \"react-loadable\"\nimport { PageLoader } from \"./components\";\nimport { dispatchUserDetails, setLoggedIn, toggleLoader } from \"./global-actions\";\nimport {getUserDetails} from \"./global-selectors\";\nimport Helper from \"./utils/Helper\";\nimport Network from \"./utils/network\";\nimport ENDPOINTS from \"./constants/endpoints\";\nimport {AUTHENTICATED_CHILDREN} from \"./routes\";\n\nconst LoadableDashboard = Loadable({\n  loader: () => import(\"./pages/DashboardNew\"),\n  loading: PageLoader\n})\n\nconst LoadableAuthorizer = Loadable({\n  loader: () => import(\"./authorizer\"),\n  loading: PageLoader\n})\n\nconst LoadableProjectCreator = Loadable({\n  loader: () => import(\"./pages/ProjectCreator\"),\n  loading: PageLoader\n})\n\nconst LoadablePageCreator = Loadable({\n  loader: () => import(\"./pages/PageCreator\"),\n  loading: PageLoader\n})\n\nconst LoadableComponentCreator = Loadable({\n  loader: () => import(\"./pages/ComponentCreator\"),\n  loading: PageLoader\n})\n\nconst LoadableComponentSelector = Loadable({\n  loader: () => import(\"./pages/ComponentSelector\"),\n  loading: PageLoader\n})\n\nconst LoadableForgotPassword = Loadable({\n  loader: () => import(\"./pages/ForgotPassword\"),\n  loading: PageLoader\n})\n\nconst LoadableUserProfile = Loadable({\n  loader: () => import(\"./pages/UserProfile\"),\n  loading: PageLoader\n})\n\nconst LoadableNotifications = Loadable({\n  loader: () => import(\"./pages/Notifications\"),\n  loading: PageLoader\n})\n\nconst LoadableSettings = Loadable({\n  loader: () => import(\"./pages/Settings\"),\n  loading: PageLoader\n})\n\nconst LoadableCollaborationBoard = Loadable({\n  loader: () => import(\"./pages/CollaborationBoard\"),\n  loading: PageLoader\n})\n\nconst loadables = {\n  LoadableDashboard,\n  LoadableAuthorizer,\n  LoadableProjectCreator,\n  LoadablePageCreator,\n  LoadableComponentCreator,\n  LoadableComponentSelector ,\n  LoadableForgotPassword,\n  LoadableUserProfile,\n  LoadableNotifications,\n  LoadableSettings,\n  LoadableCollaborationBoard\n};\n\nfunction Authenticator(props) {\n  const { dispatchUserDetails, navigate, setLoggedIn, toggleLoader, userDetails } = props;\n  const isLoggedIn = !!Helper.getCookie(\"auth_session_token\");\n  const authSessionUser = Helper.getCookie(\"auth_session_user\");\n  const location = useLocation();\n\n  useEffect(() => {\n    setLoggedIn(isLoggedIn);\n    if (!isLoggedIn) {\n      navigate(\"/login\");\n    } else {\n      !userDetails && Network.get(ENDPOINTS.BE.USER.CURRENT, null, {toggleLoader})\n        .then(res => dispatchUserDetails(res.body))\n        .catch(e => console.log(e));\n      window.location.pathname === \"/\" && navigate(\"/\" + authSessionUser);\n    }\n  }, [isLoggedIn, location]);\n\n  const getRoutes = () => {\n    return <Routes>\n        {\n          AUTHENTICATED_CHILDREN.map((route, i) => {\n            const Component = loadables[route.element];\n            return <Route key={\"authenticator-route-\" + i} path={route.path} element={<Component navigate={navigate} />} />\n          })\n        }\n      </Routes>;\n  }\n\n  return getRoutes();\n}\n\nAuthenticator.props = {\n  userDetails: PropTypes.object,\n  dispatchUserDetails: PropTypes.func,\n  setLoggedIn: PropTypes.func\n}\n\nconst mapStateToProps = createPropsSelector({\n  userDetails: getUserDetails\n})\n\nconst mapDispatchToProps = {\n  dispatchUserDetails,\n  setLoggedIn,\n  toggleLoader\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Authenticator);"],"names":["loadables","LoadableDashboard","Loadable","loader","loading","PageLoader","LoadableAuthorizer","LoadableProjectCreator","LoadablePageCreator","LoadableComponentCreator","LoadableComponentSelector","LoadableForgotPassword","LoadableUserProfile","LoadableNotifications","LoadableSettings","LoadableCollaborationBoard","Authenticator","props","dispatchUserDetails","navigate","setLoggedIn","toggleLoader","userDetails","isLoggedIn","Helper","authSessionUser","location","useLocation","useEffect","Network","ENDPOINTS","then","res","body","catch","e","console","log","window","pathname","AUTHENTICATED_CHILDREN","route","i","Component","element","path","PropTypes","mapStateToProps","createPropsSelector","getUserDetails","mapDispatchToProps","connect"],"sourceRoot":""}