{"version":3,"file":"static/js/840.2aa9f170.chunk.js","mappings":"6OAKaA,GAAwBC,E,QAAAA,KAFrB,SAAC,GAAD,SAAEC,IAAF,IAIZ,SAACC,GACG,OAAOA,EAAUC,MAAMC,YAAYC,OACtC,IAKQC,IAFgBC,EAAAA,EAAAA,IAAkBR,EAAuB,eACzCQ,EAAAA,EAAAA,IAAkBR,EAAuB,eAClCQ,EAAAA,EAAAA,IAAkBR,EAAuB,eAQhES,IAPYD,EAAAA,EAAAA,IAAkBR,EAAuB,WACxCQ,EAAAA,EAAAA,IAAkBR,EAAuB,YAC1CQ,EAAAA,EAAAA,IAAkBR,EAAuB,WACjCQ,EAAAA,EAAAA,IAAkBR,EAAuB,mBAClDQ,EAAAA,EAAAA,IAAkBR,EAAuB,aAChCQ,EAAAA,EAAAA,IAAkBR,EAAuB,mBACxCQ,EAAAA,EAAAA,IAAkBR,EAAuB,UACvCQ,EAAAA,EAAAA,IAAkBR,EAAuB,sB,iDCuCvEU,GAAkBC,EAAAA,EAAAA,IAAoB,CAC1CC,WAAYL,EACZM,SAAUA,EAAAA,GACVC,kBAAmBL,IAGfM,EAAqB,CACzBC,mBAAAA,EAAAA,GACAC,0BAAAA,EAAAA,IAGF,GAAeC,EAAAA,EAAAA,IAAQR,EAAiBK,EAAxC,EAxDoB,SAAAI,GAClB,IAAOP,EAA0FO,EAA1FP,WAAYI,EAA8EG,EAA9EH,mBAAoBC,EAA0DE,EAA1DF,0BAA2BJ,EAA+BM,EAA/BN,SAAUC,EAAqBK,EAArBL,kBAC5E,GAAoCM,EAAAA,EAAAA,UAAS,CAAC,GAA9C,eAAOC,EAAP,KAAmBC,EAAnB,KACA,GAA4BF,EAAAA,EAAAA,UAAS,MAArC,eAAOG,EAAP,KAAeC,EAAf,KACA,GAAoDC,EAAAA,EAAAA,GAAgB,CAACF,OAAAA,IAA9DG,EAAP,EAAOA,cAAeC,EAAtB,EAAsBA,YAAaC,EAAnC,EAAmCA,cAC7BC,EAAahB,EAAWiB,EAAAA,GAAeC,EAAAA,GAY7C,OAVAC,EAAAA,EAAAA,YAAU,WACR,IAAKT,EAAQ,CACX,IAAMU,EAAOC,EAAAA,EAAAA,KAAA,WACPC,GAAYC,EAAAA,EAAAA,IAAGH,GAErB,OADAT,EAAUW,GACH,kBAAMA,EAAUE,OAAhB,CACR,CACF,GAAE,CAACd,KAGG,SAACe,EAAA,EAAD,CAAaC,WAAW,EAAMC,QAASX,EAAvC,UACH,iBAAKY,UAAU,qDAAf,WACE,kBAAMA,UAAU,oEACdC,SAAS,IACTC,UAAa,SAACC,GAAD,OAAOlB,EAAckB,EAAGhC,EAAYI,EAAoBF,EAAmBG,EAA2BI,EAAtG,EACbwB,QAAWlB,EACXmB,QAAWlB,EAJb,WAKE,SAAC,EAAAmB,MAAD,CAAOC,YAAY,EAAMC,WAAY,CAAC,CAACC,KAAM,cAAe7B,WAAYA,EAAY8B,SAAS,UAC7F,SAAC,EAAAC,KAAD,CAAM9B,cAAeA,EAAeD,WAAYA,EAAYJ,0BAA2BA,EAA2BH,kBAAmBA,EAAmBS,OAAQA,KAChK,SAAC,EAAAwB,MAAD,CAAOE,WACL,CACE,CAACC,KAAM,mBAAoB/B,MAAO,CAACkC,MAAO,oBAAqB9B,OAAAA,IAC/D,CAAC2B,KAAM,mBAAoB/B,MAAO,CAACkC,MAAO,iBAAkBpC,0BAAAA,KAE9DH,kBAAmBA,EAAmBqC,SAAS,QAAQG,OAAQ,CAACC,SAAU,gBAE9E,SAAC,EAAAC,oBAAD,QAGP,IClDD,G","sources":["app/pages/PageCreator/selectors.js","app/pages/PageCreator/PageCreator.jsx","app/pages/PageCreator/index.js"],"sourcesContent":["import {createSelector} from \"reselect\"\nimport {createGetSelector} from \"reselect-immutable-helpers\"\n\nconst getData = ({data}) => data\n\nexport const getPresentPageCreator = createSelector(\n    getData,\n    (dataState) => {\n        return dataState.pages.pageCreator.present\n    }\n)\n\nexport const getFormErrors = createGetSelector(getPresentPageCreator, \"formErrors\")\nexport const getFormValues = createGetSelector(getPresentPageCreator, \"formValues\")\nexport const getPresentPageConfig = createGetSelector(getPresentPageCreator, \"pageConfig\")\nexport const getArmory = createGetSelector(getPresentPageCreator, \"armory\")\nexport const getHistory = createGetSelector(getPresentPageCreator, \"history\")\nexport const getLayout = createGetSelector(getPresentPageCreator, \"layout\")\nexport const getPreviousLayout = createGetSelector(getPresentPageCreator, \"previousLayout\")\nexport const isMobile = createGetSelector(getPresentPageCreator, \"isMobile\")\nexport const getToolActionMeta = createGetSelector(getPresentPageCreator, \"toolActionMeta\")\nexport const getClearPropsState = createGetSelector(getPresentPageCreator, \"clear\")\nexport const getSelectedComponent = createGetSelector(getPresentPageCreator, \"selectedComponent\")","import React, {useEffect, useState} from \"react\";\nimport PropTypes from \"prop-types\";\nimport {connect} from \"react-redux\";\nimport {createPropsSelector} from \"reselect-immutable-helpers\";\nimport {DndProvider} from \"react-dnd\"\nimport {HTML5Backend} from \"react-dnd-html5-backend\"\nimport {TouchBackend} from \"react-dnd-touch-backend\"\nimport io from \"socket.io-client\";\nimport { isMobile } from \"../../global-selectors\";\nimport {getPresentPageConfig, getSelectedComponent} from \"./selectors\";\nimport {dispatchPageConfig, dispatchSelectedComponent} from \"./actions\";\nimport {Aside, Main, ToolActionContainer} from \"../../components\";\nimport useEventHandler from \"../../hooks/useEventHandler\";\nimport API_CONFIG from \"../../constants/api-config\";\nimport \"./PageCreator.module.scss\";\n\nconst PageCreator = props => {\n  const {pageConfig, dispatchPageConfig, dispatchSelectedComponent, isMobile, selectedComponent} = props\n  const [clientRect, setClientRect] = useState({});\n  const [socket, setSocket] = useState(null);\n  const {handleKeyDown, handleKeyUp, handleOnClick} = useEventHandler({socket});\n  const dndBackend = isMobile ? TouchBackend : HTML5Backend;\n\n  useEffect(() => {\n    if (!socket) {\n      const host = API_CONFIG.HOST[process.env.NODE_ENV || \"development\"];\n      const newSocket = io(host);\n      setSocket(newSocket);\n      return () => newSocket.close();\n    }\n  }, [socket]);\n  \n  // return <DndProvider backend={Backend}>\n  return <DndProvider debugMode={true} backend={dndBackend}>\n      <div className=\"c-PageCreator d-flex flex-column flex-nowrap h-100\">\n        <main className=\"c-PageCreator__content d-flex flex-row flex-nowrap position-fixed\" \n          tabIndex=\"0\"\n          onKeyDown = {(e) => handleKeyDown(e, pageConfig, dispatchPageConfig, selectedComponent, dispatchSelectedComponent, clientRect)}\n          onKeyUp = {handleKeyUp}\n          onClick = {handleOnClick}>\n          <Aside persistent={true} childItems={[{name: \"ArmoryLib\"}]} clientRect={clientRect} position=\"left\" />\n          <Main setClientRect={setClientRect} clientRect={clientRect} dispatchSelectedComponent={dispatchSelectedComponent} selectedComponent={selectedComponent} socket={socket} />\n          <Aside childItems={\n            [\n              {name: \"PropertiesWidget\", props: {title: \"Component Details\", socket}},\n              {name: \"CodeViewerWidget\", props: {title: \"Generated Code\", dispatchSelectedComponent}}\n            ]\n          } selectedComponent={selectedComponent} position=\"right\" styles={{fontSize: \"0.8rem\"}}/>\n        </main>\n        <ToolActionContainer />\n      </div>\n    </DndProvider>;\n};\n\nPageCreator.propTypes = {\n  pageConfig: PropTypes.object,\n  dispatchPageConfig: PropTypes.func,\n  selectedComponent: PropTypes.string,\n  dispatchSelectedComponent: PropTypes.func\n};\n\nconst mapStateToProps = createPropsSelector({\n  pageConfig: getPresentPageConfig,\n  isMobile: isMobile,\n  selectedComponent: getSelectedComponent\n})\n\nconst mapDispatchToProps = {\n  dispatchPageConfig,\n  dispatchSelectedComponent\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PageCreator);","import PageCreator from \"./PageCreator.jsx\";\n\nexport default PageCreator;"],"names":["getPresentPageCreator","createSelector","data","dataState","pages","pageCreator","present","getPresentPageConfig","createGetSelector","getSelectedComponent","mapStateToProps","createPropsSelector","pageConfig","isMobile","selectedComponent","mapDispatchToProps","dispatchPageConfig","dispatchSelectedComponent","connect","props","useState","clientRect","setClientRect","socket","setSocket","useEventHandler","handleKeyDown","handleKeyUp","handleOnClick","dndBackend","TouchBackend","HTML5Backend","useEffect","host","API_CONFIG","newSocket","io","close","DndProvider","debugMode","backend","className","tabIndex","onKeyDown","e","onKeyUp","onClick","Aside","persistent","childItems","name","position","Main","title","styles","fontSize","ToolActionContainer"],"sourceRoot":""}